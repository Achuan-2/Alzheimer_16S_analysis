<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>q2_feature_table : summarize</title>
    <link rel="stylesheet" href="./q2templateassets/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="./q2templateassets/css/normalize.css"/>
    <link rel="stylesheet" href="./q2templateassets/css/base-template.css"/>
    <script src="./q2templateassets/js/jquery-3.2.0.min.js" charset="utf-8"></script>
    <script src="./q2templateassets/js/bootstrap.min.js" charset="utf-8"></script>
    
<script src="js/vega.min.js"></script>
<script src="js/vega-embed.min.js"></script>
<link rel="stylesheet" type="text/css" href="css/spinkit.css" /> 
  </head>
  <body>
    <div class="container-fluid">
      <div id="q2templatesheader" class="row">
        <div class="col-lg-12">
          <a href="http://qiime2.org/">
            <img src="./q2templateassets/img/qiime2-rect-200.png"
            alt="QIIME 2">
          </a>
        </div>
      </div>
        

  <div class="row">
    <div class="col-lg-12">
      <ul class="nav nav-tabs">
        
          <li class="">
            <a href="index.html">
              Overview
            </a>
          </li>
        
          <li class="active">
            <a href="sample-frequency-detail.html">
              Interactive Sample Detail
            </a>
          </li>
        
          <li class="">
            <a href="feature-frequency-detail.html">
              Feature Detail
            </a>
          </li>
        
      </ul>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      


<div class="row">

  <div class="col-lg-8">
    <div id="plot">
      <div id="loading" class="spinner">
        <div class="rect1"></div>
        <div class="rect2"></div>
        <div class="rect3"></div>
        <div class="rect4"></div>
        <div class="rect5"></div>
      </div>
    </div>
  </div>

  <div class="col-lg-4">
    <div class="row">
      <div class="col-lg-12">
        <h3>Plot Controls</h3>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12" id="toolbar"></div>
    </div>

    <div class="row">
      <div class="col-lg-12" id="metadata-category"></div>
    </div>

    <div class="row">
      <div class="col-lg-12" id="sampling-depth-slider"></div>
    </div>

    <div class="row">
      <div class="col-lg-12" id="text-field"></div>
    </div>
  </div>

</div>






<script type="text/javascript">
  function handleErrors(errors, element, msg) {
    console.error(errors);
    msg = msg === undefined ? '' : msg + '<br><br>';
    var helpMsg = '<p class="alert alert-danger"> \
                   There was an error loading and rendering the \
                   visualization.<br><br>' + msg + 'Please \
                   copy-and-paste the following error messages when \
                   reporting this error (please be aware that the content \
                   of your analysis data and/or metadata is included in \
                   these messages):</p>';
    var helpMsgDiv = $('<div></div>');
    helpMsgDiv.append(helpMsg);
    helpMsgDiv.append('<pre><code>' + errors.join('\n\n') + '</code></pre>');
    element.replaceWith(helpMsgDiv);
  }
  window.onerror = function(error) {
    handleErrors([error], $('#loading'));
  };
</script>
<script id="spec" type="application/json">
{"$schema": "https://vega.github.io/schema/vega/v5.json", "autosize": {"contains": "content", "type": "fit-x", "resize": true}, "width": 800, "data": [{"transform": [{"as": "selectedCategory", "expr": "datum.metadata[category]", "type": "formula"}], "name": "table", "values": [{"id": "AD01", "metadata": {"Group": "AD", "sampleid_description": "AD01"}, "frequency": 10971.0}, {"id": "AD04", "metadata": {"Group": "AD", "sampleid_description": "AD04"}, "frequency": 13993.0}, {"id": "AD05", "metadata": {"Group": "AD", "sampleid_description": "AD05"}, "frequency": 19168.0}, {"id": "AD07", "metadata": {"Group": "AD", "sampleid_description": "AD07"}, "frequency": 20399.0}, {"id": "AD08", "metadata": {"Group": "AD", "sampleid_description": "AD08"}, "frequency": 27163.0}, {"id": "AD09", "metadata": {"Group": "AD", "sampleid_description": "AD09"}, "frequency": 20409.0}, {"id": "AD10", "metadata": {"Group": "AD", "sampleid_description": "AD10"}, "frequency": 12859.0}, {"id": "AD100", "metadata": {"Group": "AD", "sampleid_description": "AD100"}, "frequency": 24552.0}, {"id": "AD101", "metadata": {"Group": "AD", "sampleid_description": "AD101"}, "frequency": 17609.0}, {"id": "AD102", "metadata": {"Group": "AD", "sampleid_description": "AD102"}, "frequency": 26015.0}, {"id": "AD103", "metadata": {"Group": "AD", "sampleid_description": "AD103"}, "frequency": 14411.0}, {"id": "AD104", "metadata": {"Group": "AD", "sampleid_description": "AD104"}, "frequency": 16901.0}, {"id": "AD105", "metadata": {"Group": "AD", "sampleid_description": "AD105"}, "frequency": 15354.0}, {"id": "AD106", "metadata": {"Group": "AD", "sampleid_description": "AD106"}, "frequency": 23936.0}, {"id": "AD107", "metadata": {"Group": "AD", "sampleid_description": "AD107"}, "frequency": 22366.0}, {"id": "AD108", "metadata": {"Group": "AD", "sampleid_description": "AD108"}, "frequency": 21135.0}, {"id": "AD109", "metadata": {"Group": "AD", "sampleid_description": "AD109"}, "frequency": 26001.0}, {"id": "AD11", "metadata": {"Group": "AD", "sampleid_description": "AD11"}, "frequency": 21700.0}, {"id": "AD110", "metadata": {"Group": "AD", "sampleid_description": "AD110"}, "frequency": 26283.0}, {"id": "AD111", "metadata": {"Group": "AD", "sampleid_description": "AD111"}, "frequency": 22842.0}, {"id": "AD112", "metadata": {"Group": "AD", "sampleid_description": "AD112"}, "frequency": 23530.0}, {"id": "AD113", "metadata": {"Group": "AD", "sampleid_description": "AD113"}, "frequency": 23760.0}, {"id": "AD114", "metadata": {"Group": "AD", "sampleid_description": "AD114"}, "frequency": 21751.0}, {"id": "AD116", "metadata": {"Group": "AD", "sampleid_description": "AD116"}, "frequency": 21065.0}, {"id": "AD118", "metadata": {"Group": "AD", "sampleid_description": "AD118"}, "frequency": 25215.0}, {"id": "AD119", "metadata": {"Group": "AD", "sampleid_description": "AD119"}, "frequency": 24220.0}, {"id": "AD12", "metadata": {"Group": "AD", "sampleid_description": "AD12"}, "frequency": 13149.0}, {"id": "AD120", "metadata": {"Group": "AD", "sampleid_description": "AD120"}, "frequency": 31186.0}, {"id": "AD121", "metadata": {"Group": "AD", "sampleid_description": "AD121"}, "frequency": 30331.0}, {"id": "AD122", "metadata": {"Group": "AD", "sampleid_description": "AD122"}, "frequency": 31195.0}, {"id": "AD123", "metadata": {"Group": "AD", "sampleid_description": "AD123"}, "frequency": 24094.0}, {"id": "AD125", "metadata": {"Group": "AD", "sampleid_description": "AD125"}, "frequency": 24620.0}, {"id": "AD126", "metadata": {"Group": "AD", "sampleid_description": "AD126"}, "frequency": 25239.0}, {"id": "AD127", "metadata": {"Group": "AD", "sampleid_description": "AD127"}, "frequency": 29479.0}, {"id": "AD13", "metadata": {"Group": "AD", "sampleid_description": "AD13"}, "frequency": 14405.0}, {"id": "AD14", "metadata": {"Group": "AD", "sampleid_description": "AD14"}, "frequency": 14090.0}, {"id": "AD16", "metadata": {"Group": "AD", "sampleid_description": "AD16"}, "frequency": 11978.0}, {"id": "AD17", "metadata": {"Group": "AD", "sampleid_description": "AD17"}, "frequency": 15244.0}, {"id": "AD18", "metadata": {"Group": "AD", "sampleid_description": "AD18"}, "frequency": 13785.0}, {"id": "AD19", "metadata": {"Group": "AD", "sampleid_description": "AD19"}, "frequency": 20632.0}, {"id": "AD20", "metadata": {"Group": "AD", "sampleid_description": "AD20"}, "frequency": 13523.0}, {"id": "AD21", "metadata": {"Group": "AD", "sampleid_description": "AD21"}, "frequency": 16273.0}, {"id": "AD22", "metadata": {"Group": "AD", "sampleid_description": "AD22"}, "frequency": 16785.0}, {"id": "AD23", "metadata": {"Group": "AD", "sampleid_description": "AD23"}, "frequency": 14652.0}, {"id": "AD24", "metadata": {"Group": "AD", "sampleid_description": "AD24"}, "frequency": 17080.0}, {"id": "AD25", "metadata": {"Group": "AD", "sampleid_description": "AD25"}, "frequency": 14605.0}, {"id": "AD26", "metadata": {"Group": "AD", "sampleid_description": "AD26"}, "frequency": 15863.0}, {"id": "AD27", "metadata": {"Group": "AD", "sampleid_description": "AD27"}, "frequency": 16876.0}, {"id": "AD29", "metadata": {"Group": "AD", "sampleid_description": "AD29"}, "frequency": 27395.0}, {"id": "AD30", "metadata": {"Group": "AD", "sampleid_description": "AD30"}, "frequency": 23864.0}, {"id": "AD31", "metadata": {"Group": "AD", "sampleid_description": "AD31"}, "frequency": 25054.0}, {"id": "AD32", "metadata": {"Group": "AD", "sampleid_description": "AD32"}, "frequency": 26856.0}, {"id": "AD33", "metadata": {"Group": "AD", "sampleid_description": "AD33"}, "frequency": 27050.0}, {"id": "AD34", "metadata": {"Group": "AD", "sampleid_description": "AD34"}, "frequency": 22800.0}, {"id": "AD35", "metadata": {"Group": "AD", "sampleid_description": "AD35"}, "frequency": 17996.0}, {"id": "AD36", "metadata": {"Group": "AD", "sampleid_description": "AD36"}, "frequency": 39138.0}, {"id": "AD37", "metadata": {"Group": "AD", "sampleid_description": "AD37"}, "frequency": 21954.0}, {"id": "AD40", "metadata": {"Group": "AD", "sampleid_description": "AD40"}, "frequency": 17713.0}, {"id": "AD41", "metadata": {"Group": "AD", "sampleid_description": "AD41"}, "frequency": 19110.0}, {"id": "AD47", "metadata": {"Group": "AD", "sampleid_description": "AD47"}, "frequency": 19086.0}, {"id": "AD50", "metadata": {"Group": "AD", "sampleid_description": "AD50"}, "frequency": 24899.0}, {"id": "AD53", "metadata": {"Group": "AD", "sampleid_description": "AD53"}, "frequency": 33985.0}, {"id": "AD54", "metadata": {"Group": "AD", "sampleid_description": "AD54"}, "frequency": 23198.0}, {"id": "AD55", "metadata": {"Group": "AD", "sampleid_description": "AD55"}, "frequency": 25926.0}, {"id": "AD58", "metadata": {"Group": "AD", "sampleid_description": "AD58"}, "frequency": 21318.0}, {"id": "AD59", "metadata": {"Group": "AD", "sampleid_description": "AD59"}, "frequency": 22090.0}, {"id": "AD60", "metadata": {"Group": "AD", "sampleid_description": "AD60"}, "frequency": 31670.0}, {"id": "AD61", "metadata": {"Group": "AD", "sampleid_description": "AD61"}, "frequency": 24276.0}, {"id": "AD62", "metadata": {"Group": "AD", "sampleid_description": "AD62"}, "frequency": 22763.0}, {"id": "AD63", "metadata": {"Group": "AD", "sampleid_description": "AD63"}, "frequency": 16861.0}, {"id": "AD64", "metadata": {"Group": "AD", "sampleid_description": "AD64"}, "frequency": 18427.0}, {"id": "AD65", "metadata": {"Group": "AD", "sampleid_description": "AD65"}, "frequency": 20191.0}, {"id": "AD66", "metadata": {"Group": "AD", "sampleid_description": "AD66"}, "frequency": 19228.0}, {"id": "AD67", "metadata": {"Group": "AD", "sampleid_description": "AD67"}, "frequency": 22345.0}, {"id": "AD68", "metadata": {"Group": "AD", "sampleid_description": "AD68"}, "frequency": 15150.0}, {"id": "AD69", "metadata": {"Group": "AD", "sampleid_description": "AD69"}, "frequency": 21020.0}, {"id": "AD70", "metadata": {"Group": "AD", "sampleid_description": "AD70"}, "frequency": 16812.0}, {"id": "AD71", "metadata": {"Group": "AD", "sampleid_description": "AD71"}, "frequency": 22524.0}, {"id": "AD74", "metadata": {"Group": "AD", "sampleid_description": "AD74"}, "frequency": 21367.0}, {"id": "AD75", "metadata": {"Group": "AD", "sampleid_description": "AD75"}, "frequency": 23647.0}, {"id": "AD76", "metadata": {"Group": "AD", "sampleid_description": "AD76"}, "frequency": 26876.0}, {"id": "AD77", "metadata": {"Group": "AD", "sampleid_description": "AD77"}, "frequency": 20500.0}, {"id": "AD78", "metadata": {"Group": "AD", "sampleid_description": "AD78"}, "frequency": 35571.0}, {"id": "AD79", "metadata": {"Group": "AD", "sampleid_description": "AD79"}, "frequency": 35354.0}, {"id": "AD80", "metadata": {"Group": "AD", "sampleid_description": "AD80"}, "frequency": 27708.0}, {"id": "AD83", "metadata": {"Group": "AD", "sampleid_description": "AD83"}, "frequency": 25615.0}, {"id": "AD84", "metadata": {"Group": "AD", "sampleid_description": "AD84"}, "frequency": 23868.0}, {"id": "AD85", "metadata": {"Group": "AD", "sampleid_description": "AD85"}, "frequency": 22421.0}, {"id": "AD86", "metadata": {"Group": "AD", "sampleid_description": "AD86"}, "frequency": 22797.0}, {"id": "AD88", "metadata": {"Group": "AD", "sampleid_description": "AD88"}, "frequency": 21729.0}, {"id": "AD89", "metadata": {"Group": "AD", "sampleid_description": "AD89"}, "frequency": 26740.0}, {"id": "AD90", "metadata": {"Group": "AD", "sampleid_description": "AD90"}, "frequency": 29983.0}, {"id": "AD91", "metadata": {"Group": "AD", "sampleid_description": "AD91"}, "frequency": 25491.0}, {"id": "AD92", "metadata": {"Group": "AD", "sampleid_description": "AD92"}, "frequency": 28212.0}, {"id": "AD93", "metadata": {"Group": "AD", "sampleid_description": "AD93"}, "frequency": 31117.0}, {"id": "AD94", "metadata": {"Group": "AD", "sampleid_description": "AD94"}, "frequency": 23801.0}, {"id": "AD96", "metadata": {"Group": "AD", "sampleid_description": "AD96"}, "frequency": 23755.0}, {"id": "AD97", "metadata": {"Group": "AD", "sampleid_description": "AD97"}, "frequency": 23863.0}, {"id": "AD98", "metadata": {"Group": "AD", "sampleid_description": "AD98"}, "frequency": 32648.0}, {"id": "AD99", "metadata": {"Group": "AD", "sampleid_description": "AD99"}, "frequency": 24664.0}, {"id": "C01", "metadata": {"Group": "C", "sampleid_description": "C01"}, "frequency": 19213.0}, {"id": "C02", "metadata": {"Group": "C", "sampleid_description": "C02"}, "frequency": 29404.0}, {"id": "C03", "metadata": {"Group": "C", "sampleid_description": "C03"}, "frequency": 24977.0}, {"id": "C05", "metadata": {"Group": "C", "sampleid_description": "C05"}, "frequency": 19966.0}, {"id": "C07", "metadata": {"Group": "C", "sampleid_description": "C07"}, "frequency": 21676.0}, {"id": "C08", "metadata": {"Group": "C", "sampleid_description": "C08"}, "frequency": 21185.0}, {"id": "C09", "metadata": {"Group": "C", "sampleid_description": "C09"}, "frequency": 23248.0}, {"id": "C10", "metadata": {"Group": "C", "sampleid_description": "C10"}, "frequency": 20528.0}, {"id": "C11", "metadata": {"Group": "C", "sampleid_description": "C11"}, "frequency": 18423.0}, {"id": "C12", "metadata": {"Group": "C", "sampleid_description": "C12"}, "frequency": 18397.0}, {"id": "C13", "metadata": {"Group": "C", "sampleid_description": "C13"}, "frequency": 21319.0}, {"id": "C15", "metadata": {"Group": "C", "sampleid_description": "C15"}, "frequency": 20316.0}, {"id": "C16", "metadata": {"Group": "C", "sampleid_description": "C16"}, "frequency": 14383.0}, {"id": "C17", "metadata": {"Group": "C", "sampleid_description": "C17"}, "frequency": 32215.0}, {"id": "C18", "metadata": {"Group": "C", "sampleid_description": "C18"}, "frequency": 27138.0}, {"id": "C19", "metadata": {"Group": "C", "sampleid_description": "C19"}, "frequency": 22632.0}, {"id": "C20", "metadata": {"Group": "C", "sampleid_description": "C20"}, "frequency": 19382.0}, {"id": "C21", "metadata": {"Group": "C", "sampleid_description": "C21"}, "frequency": 31669.0}, {"id": "C22", "metadata": {"Group": "C", "sampleid_description": "C22"}, "frequency": 20047.0}, {"id": "C23", "metadata": {"Group": "C", "sampleid_description": "C23"}, "frequency": 16603.0}, {"id": "C24", "metadata": {"Group": "C", "sampleid_description": "C24"}, "frequency": 16396.0}, {"id": "C25", "metadata": {"Group": "C", "sampleid_description": "C25"}, "frequency": 19262.0}, {"id": "C26", "metadata": {"Group": "C", "sampleid_description": "C26"}, "frequency": 21746.0}, {"id": "C27", "metadata": {"Group": "C", "sampleid_description": "C27"}, "frequency": 20182.0}, {"id": "C28", "metadata": {"Group": "C", "sampleid_description": "C28"}, "frequency": 16968.0}, {"id": "C29", "metadata": {"Group": "C", "sampleid_description": "C29"}, "frequency": 19528.0}, {"id": "C30", "metadata": {"Group": "C", "sampleid_description": "C30"}, "frequency": 18077.0}, {"id": "C31", "metadata": {"Group": "C", "sampleid_description": "C31"}, "frequency": 15314.0}, {"id": "C32", "metadata": {"Group": "C", "sampleid_description": "C32"}, "frequency": 16084.0}, {"id": "C33", "metadata": {"Group": "C", "sampleid_description": "C33"}, "frequency": 19181.0}, {"id": "C34", "metadata": {"Group": "C", "sampleid_description": "C34"}, "frequency": 30675.0}, {"id": "C35", "metadata": {"Group": "C", "sampleid_description": "C35"}, "frequency": 21080.0}, {"id": "C36", "metadata": {"Group": "C", "sampleid_description": "C36"}, "frequency": 19471.0}, {"id": "C39", "metadata": {"Group": "C", "sampleid_description": "C39"}, "frequency": 20417.0}, {"id": "C40", "metadata": {"Group": "C", "sampleid_description": "C40"}, "frequency": 30784.0}, {"id": "C42", "metadata": {"Group": "C", "sampleid_description": "C42"}, "frequency": 16490.0}, {"id": "C43", "metadata": {"Group": "C", "sampleid_description": "C43"}, "frequency": 13741.0}, {"id": "C44", "metadata": {"Group": "C", "sampleid_description": "C44"}, "frequency": 16538.0}, {"id": "C46", "metadata": {"Group": "C", "sampleid_description": "C46"}, "frequency": 16895.0}, {"id": "C49", "metadata": {"Group": "C", "sampleid_description": "C49"}, "frequency": 21020.0}, {"id": "C50", "metadata": {"Group": "C", "sampleid_description": "C50"}, "frequency": 13757.0}, {"id": "C51", "metadata": {"Group": "C", "sampleid_description": "C51"}, "frequency": 14174.0}, {"id": "C52", "metadata": {"Group": "C", "sampleid_description": "C52"}, "frequency": 31815.0}, {"id": "C54", "metadata": {"Group": "C", "sampleid_description": "C54"}, "frequency": 36749.0}, {"id": "C55", "metadata": {"Group": "C", "sampleid_description": "C55"}, "frequency": 24013.0}, {"id": "C57", "metadata": {"Group": "C", "sampleid_description": "C57"}, "frequency": 19826.0}, {"id": "C58", "metadata": {"Group": "C", "sampleid_description": "C58"}, "frequency": 26364.0}, {"id": "C59", "metadata": {"Group": "C", "sampleid_description": "C59"}, "frequency": 18667.0}, {"id": "C60", "metadata": {"Group": "C", "sampleid_description": "C60"}, "frequency": 26426.0}, {"id": "C61", "metadata": {"Group": "C", "sampleid_description": "C61"}, "frequency": 20207.0}, {"id": "C62", "metadata": {"Group": "C", "sampleid_description": "C62"}, "frequency": 27991.0}, {"id": "C63", "metadata": {"Group": "C", "sampleid_description": "C63"}, "frequency": 18705.0}, {"id": "C64", "metadata": {"Group": "C", "sampleid_description": "C64"}, "frequency": 15856.0}, {"id": "C71", "metadata": {"Group": "C", "sampleid_description": "C71"}, "frequency": 21656.0}, {"id": "C72", "metadata": {"Group": "C", "sampleid_description": "C72"}, "frequency": 24933.0}, {"id": "C73", "metadata": {"Group": "C", "sampleid_description": "C73"}, "frequency": 15992.0}, {"id": "C74", "metadata": {"Group": "C", "sampleid_description": "C74"}, "frequency": 21308.0}, {"id": "C75", "metadata": {"Group": "C", "sampleid_description": "C75"}, "frequency": 19615.0}, {"id": "C76", "metadata": {"Group": "C", "sampleid_description": "C76"}, "frequency": 15808.0}, {"id": "C77", "metadata": {"Group": "C", "sampleid_description": "C77"}, "frequency": 22492.0}, {"id": "C78", "metadata": {"Group": "C", "sampleid_description": "C78"}, "frequency": 24503.0}, {"id": "C79", "metadata": {"Group": "C", "sampleid_description": "C79"}, "frequency": 18057.0}, {"id": "C80", "metadata": {"Group": "C", "sampleid_description": "C80"}, "frequency": 17210.0}, {"id": "C81", "metadata": {"Group": "C", "sampleid_description": "C81"}, "frequency": 16125.0}, {"id": "C82", "metadata": {"Group": "C", "sampleid_description": "C82"}, "frequency": 21444.0}, {"id": "C83", "metadata": {"Group": "C", "sampleid_description": "C83"}, "frequency": 16163.0}, {"id": "C84", "metadata": {"Group": "C", "sampleid_description": "C84"}, "frequency": 12620.0}, {"id": "C85", "metadata": {"Group": "C", "sampleid_description": "C85"}, "frequency": 12771.0}, {"id": "C86", "metadata": {"Group": "C", "sampleid_description": "C86"}, "frequency": 20515.0}, {"id": "C87", "metadata": {"Group": "C", "sampleid_description": "C87"}, "frequency": 21252.0}, {"id": "C88", "metadata": {"Group": "C", "sampleid_description": "C88"}, "frequency": 14782.0}]}, {"transform": [{"type": "aggregate", "groupby": ["selectedCategory"]}], "name": "groupedBySelectedCategory", "source": "table"}, {"transform": [{"expr": "datum.frequency >= samplingDepth", "type": "filter"}, {"type": "aggregate", "groupby": ["selectedCategory"]}], "name": "groupedBySelectedCategoryAndRetained", "source": "table"}], "signals": [{"name": "width", "value": "", "bind": {"input": "text"}, "on": [{"events": {"source": "window", "type": "resize"}, "update": "containerSize()[0]"}]}, {"name": "chartHeight", "update": "width / 2.5"}, {"name": "chartOffset", "value": 20}, {"name": "height", "update": "chartHeight + chartOffset"}, {"name": "tooltip", "value": {}, "on": [{"events": "rect:mouseover", "update": "datum"}, {"events": "rect:mouseout", "update": "{}"}]}, {"bind": {"input": "select", "options": ["Group", "sampleid_description"], "element": "#metadata-category"}, "name": "category", "value": "Group"}, {"bind": {"input": "range", "element": "#sampling-depth-slider", "max": 39138, "min": 0, "step": 1}, "name": "samplingDepth", "value": 0}], "marks": [{"description": "Interactive rarefaction summary plot", "name": "rarefactionplot", "type": "group", "encode": {"enter": {"x": {"value": 0}, "y": {"signal": "chartOffset"}, "width": {"value": 200}, "height": {"signal": "chartHeight"}}}, "marks": [{"type": "rect", "from": {"data": "groupedBySelectedCategory"}, "encode": {"enter": {"x": {"scale": "xscale", "field": "selectedCategory"}, "width": {"scale": "xscale", "band": 1}, "y": {"scale": "yscale", "field": "count"}, "y2": {"scale": "yscale", "value": 0}}, "update": {"tooltip": {"signal": "{'title': datum.selectedCategory, 'Total Samples': datum.count}"}, "fill": {"value": "#D3D3D3"}}}}, {"type": "rect", "from": {"data": "groupedBySelectedCategoryAndRetained"}, "encode": {"enter": {"x": {"scale": "xscale", "field": "selectedCategory"}, "width": {"scale": "xscale", "band": 1}, "y": {"scale": "yscale", "field": "count"}, "y2": {"scale": "yscale", "value": 0}}, "update": {"tooltip": {"signal": "{'title': datum.selectedCategory, 'Samples Retained': datum.count}"}, "y": {"scale": "yscale", "field": "count"}, "y2": {"scale": "yscale", "value": 0}, "fill": {"value": "#1F77B4"}}, "hover": {"fill": {"value": "#60B3F7"}}}}, {"type": "text", "encode": {"enter": {"align": {"value": "center"}, "baseline": {"value": "top"}, "fill": {"value": "#000000"}}, "update": {"x": {"scale": "xscale", "signal": "tooltip.selectedCategory", "band": 0.5}, "y": {"scale": "yscale", "signal": "tooltip.count", "offset": -12}, "text": {"signal": "tooltip.count"}, "fillOpacity": [{"test": "datum === tooltip", "value": 0}, {"value": 1}]}}}], "scales": [{"name": "xscale", "type": "band", "domain": {"data": "groupedBySelectedCategory", "field": "selectedCategory", "sort": true}, "range": "width", "padding": 0.1, "round": true}, {"name": "yscale", "domain": {"fields": [{"data": "groupedBySelectedCategory", "field": "count"}]}, "nice": true, "range": [{"signal": "chartHeight"}, 0]}], "axes": [{"orient": "bottom", "scale": "xscale", "title": {"signal": "category"}, "labelAngle": 90, "labelAlign": "left", "labelBaseline": "middle"}, {"orient": "left", "scale": "yscale", "title": "Number of Samples", "tickMinStep": 1}]}]}
</script>

<script type="text/javascript">
  $(document).ready(function() {
    var spec = JSON.parse(document.getElementById("spec").innerHTML);

    // Try and come up with a good initial estimate of plot dimensions,
    // based on the browser dimensions.
    var opts = {
      width: $("#plot").width(),
      height: $("#plot").width() / 2.5
    };

    vegaEmbed("#plot", spec, opts)
      .then(function(result) {
        result.view.logLevel(vega.Warn);
        // Stash the view object in global namespace for debugging purposes.
        // Check out https://vega.github.io/vega/docs/api/debugging/
        // for more details.
        window.v = result.view;
      })
      .catch(function(error) {
        // From 'js-error-handler.html'
        handleErrors([error], $("#plot"));
      });

    // Clean up the vega-embed toolbar
    var toolbar = $("div .vega-actions").detach();
    toolbar.addClass("btn-group");
    toolbar.children("a").each(function() {
      $(this).addClass("btn btn-default");
    });

    toolbar.appendTo("#toolbar");

    var category = $("#metadata-category .vega-bind");
    category
      .children(".vega-bind-name")
      .replaceWith("<label> Metadata Category &nbsp;</label>");
    category.children("select").addClass("form-control");

    var samplingDepthSlider = $("#sampling-depth-slider .vega-bind");
    $(samplingDepthSlider)
      .find("label")
      .remove();
    $(samplingDepthSlider)
      .find("input")
      .attr("id", "range-slider");
    $(samplingDepthSlider)
      .find("input")
      .attr("oninput", "sliderHelperFunction(this.value);");
    $(samplingDepthSlider).prepend(
      "<label> Sampling Depth &nbsp; </label> <br>"
    );
    $(samplingDepthSlider).append(
      '<br> <input id="text-box" class="form-control" type="number" value="0" min="0" oninput="textBoxHelperFunction(this.value);" />'
    );
    $(samplingDepthSlider).append("(zero implies no even sampling)");
    samplingDepthSlider.children(".vega-bind-name").replaceWith("");

    var rotateLabels = $("#rotate-labels .vega-bind");
    rotateLabels
      .children(".vega-bind-name")
      .replaceWith("<label> Rotate Labels &nbsp;</label>");
    rotateLabels.children("checkbox").addClass("form-control");
  });
</script>


<div class="row">
  <div class="col-lg-8">
    <table id="feature-table" class="table table-striped">
      <thead>
        <tr>
          <th scope="col">Sample ID</th>
          <th scope="col">Feature Count</th>
        </tr>
      </thead>
      <tbody id="table-body"></tbody>
    </table>
  </div>
</div>

<script id="table-data" type="application/json">
{"AD36":39138.0,"C54":36749.0,"AD78":35571.0,"AD79":35354.0,"AD53":33985.0,"AD98":32648.0,"C17":32215.0,"C52":31815.0,"AD60":31670.0,"C21":31669.0,"AD122":31195.0,"AD120":31186.0,"AD93":31117.0,"C40":30784.0,"C34":30675.0,"AD121":30331.0,"AD90":29983.0,"AD127":29479.0,"C02":29404.0,"AD92":28212.0,"C62":27991.0,"AD80":27708.0,"AD29":27395.0,"AD08":27163.0,"C18":27138.0,"AD33":27050.0,"AD76":26876.0,"AD32":26856.0,"AD89":26740.0,"C60":26426.0,"C58":26364.0,"AD110":26283.0,"AD102":26015.0,"AD109":26001.0,"AD55":25926.0,"AD83":25615.0,"AD91":25491.0,"AD126":25239.0,"AD118":25215.0,"AD31":25054.0,"C03":24977.0,"C72":24933.0,"AD50":24899.0,"AD99":24664.0,"AD125":24620.0,"AD100":24552.0,"C78":24503.0,"AD61":24276.0,"AD119":24220.0,"AD123":24094.0,"C55":24013.0,"AD106":23936.0,"AD84":23868.0,"AD30":23864.0,"AD97":23863.0,"AD94":23801.0,"AD113":23760.0,"AD96":23755.0,"AD75":23647.0,"AD112":23530.0,"C09":23248.0,"AD54":23198.0,"AD111":22842.0,"AD34":22800.0,"AD86":22797.0,"AD62":22763.0,"C19":22632.0,"AD71":22524.0,"C77":22492.0,"AD85":22421.0,"AD107":22366.0,"AD67":22345.0,"AD59":22090.0,"AD37":21954.0,"AD114":21751.0,"C26":21746.0,"AD88":21729.0,"AD11":21700.0,"C07":21676.0,"C71":21656.0,"C82":21444.0,"AD74":21367.0,"C13":21319.0,"AD58":21318.0,"C74":21308.0,"C87":21252.0,"C08":21185.0,"AD108":21135.0,"C35":21080.0,"AD116":21065.0,"C49":21020.0,"AD69":21020.0,"AD19":20632.0,"C10":20528.0,"C86":20515.0,"AD77":20500.0,"C39":20417.0,"AD09":20409.0,"AD07":20399.0,"C15":20316.0,"C61":20207.0,"AD65":20191.0,"C27":20182.0,"C22":20047.0,"C05":19966.0,"C57":19826.0,"C75":19615.0,"C29":19528.0,"C36":19471.0,"C20":19382.0,"C25":19262.0,"AD66":19228.0,"C01":19213.0,"C33":19181.0,"AD05":19168.0,"AD41":19110.0,"AD47":19086.0,"C63":18705.0,"C59":18667.0,"AD64":18427.0,"C11":18423.0,"C12":18397.0,"C30":18077.0,"C79":18057.0,"AD35":17996.0,"AD40":17713.0,"AD101":17609.0,"C80":17210.0,"AD24":17080.0,"C28":16968.0,"AD104":16901.0,"C46":16895.0,"AD27":16876.0,"AD63":16861.0,"AD70":16812.0,"AD22":16785.0,"C23":16603.0,"C44":16538.0,"C42":16490.0,"C24":16396.0,"AD21":16273.0,"C83":16163.0,"C81":16125.0,"C32":16084.0,"C73":15992.0,"AD26":15863.0,"C64":15856.0,"C76":15808.0,"AD105":15354.0,"C31":15314.0,"AD17":15244.0,"AD68":15150.0,"C88":14782.0,"AD23":14652.0,"AD25":14605.0,"AD103":14411.0,"AD13":14405.0,"C16":14383.0,"C51":14174.0,"AD14":14090.0,"AD04":13993.0,"AD18":13785.0,"C50":13757.0,"C43":13741.0,"AD20":13523.0,"AD12":13149.0,"AD10":12859.0,"C85":12771.0,"C84":12620.0,"AD16":11978.0,"AD01":10971.0}
</script>

<script type="text/javascript">
  var totalFrequencies = 3701484;
  var sampleCount = 171;
  var defaultDescription = "Retained " + (totalFrequencies.toLocaleString('en'))
                                       + " (100.00%) features in "
                                       + sampleCount + " (100.00%) samples at the specifed sampling depth.";


  var textField = document.getElementById('text-field');
  var tableBody = document.getElementById("table-body");
  var table = document.getElementById("feature-table");

  // when the viz loads the default description is displayed
  textField.innerHTML = defaultDescription;

  var sampleFrequency = JSON.parse(document.getElementById("table-data").innerHTML);
  // get object keys and store them in an ascending order based on the key value
  // this order is used to create the table rows
  sortedSampleIDs = Object.keys(sampleFrequency).sort(function(a, b) {
    var temp = sampleFrequency[a] - sampleFrequency[b];
    // if two samples have the same number of features then we
    // determine the order using the sample ID alphabetical order
    if (temp == 0){
      return b.localeCompare(a);
    }

  return temp;
  });

  sortedSampleIDs.forEach(function(element) {
    var row = tableBody.insertRow(0);
    var cell1 = row.insertCell(0);
    var cell2 = row.insertCell(1);
    cell1.innerHTML = element;
    cell2.innerHTML = sampleFrequency[element];

  });


  function updateTableandText(val) {
    var retainedSampleCount = 0;

    // start the counter at 1 to ignore the header row
    for (var i = 1; row = table.rows[i]; i++) {

      if (Number(row.cells[1].innerHTML) < val) {
        row.className = "danger";
      } else {
        row.className = "";
        retainedSampleCount += 1;
      }
    }
    if (val == 0){

    textField.innerHTML = defaultDescription;

    }
    else{
      var retainedFeatureCount = retainedSampleCount * val;
      textField.innerHTML = "Retained " + retainedFeatureCount.toLocaleString('en')
                                        + " (" + (retainedFeatureCount/totalFrequencies*100).toFixed(2) + "%) features in "
                                        + retainedSampleCount + " (" + (retainedSampleCount/sampleCount*100).toFixed(2)
                                        +  "%) samples at the specifed sampling depth.";
    }

  }


  function updateSliderVal(val) {
    var slider = document.getElementById("range-slider");
    slider.value = val;
    slider.dispatchEvent(new Event("change"));
    slider.dispatchEvent(new Event("input"));
  }


  function updateBoxVal(val) {
    var num = document.getElementById("text-box");
    num.value = val;
  }


  function sliderHelperFunction(val){
    updateBoxVal(val);
    updateTableandText(val);

  }


  function textBoxHelperFunction(val){
    val = parseInt(val);
    if (val !== val) {
      val = 0;
    }

    // make sure the value in the textbox cannot exceed the max count
    if (val > 39138.0){
      var num = document.getElementById("text-box");
      num.value = 39138.0;
    }
    updateSliderVal(val);
  }
</script>


    </div>
  </div>


    </div>
    <script type="text/javascript">
      if (window.frameElement) {
          document.getElementById('q2templatesheader').remove();
      }
    </script>
    

  </body>
</html>